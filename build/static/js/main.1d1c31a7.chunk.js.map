{"version":3,"sources":["components/Person.js","components/Filter.js","components/Input.js","services/persons.js","components/Notification.js","components/Errorinfo.js","App.js","index.js"],"names":["Person","person","erasePerson","name","number","onClick","Filter","props","value","onChange","Input","text","baseUrl","axios","get","then","response","data","newPerson","post","id","put","delete","Notification","message","className","Errorinfo","errorMessage","App","useState","persons","setPersons","newName","setNewName","newNumber","setNewNumber","newFilter","setNewFilter","showAll","setShowAll","infoMessage","setInfoMessage","setErrorMessage","useEffect","personService","initialPersons","changeNumber","find","p","changedPerson","returnedPerson","map","setTimeout","catch","error","filter","personsToShow","toLowerCase","includes","event","target","onSubmit","preventDefault","window","confirm","concat","console","log","type","personToErase","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.1d1c31a7.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Person = ({ person, erasePerson }) => {\r\n    return (\r\n       <div>\r\n            {person.name + \" \"} \r\n            {person.number + \" \"}\r\n            <button onClick={erasePerson}>delete</button>\r\n        </div>\r\n       \r\n    )\r\n}\r\n\r\nexport default Person\r\n","import React from 'react'\r\n\r\nconst Filter = (props) => {\r\n\r\n    return (\r\n      <div>\r\n        filter shown with <input\r\n        value={props.value}\r\n        onChange={props.onChange}            \r\n        /> \r\n             \r\n      </div>\r\n  \r\n    )\r\n    \r\n  }\r\n\r\n  export default Filter","import React from 'react'\r\n\r\nconst Input = (props) => {\r\n\r\n    return (\r\n      <div>\r\n        {props.text}:  \r\n        <input \r\n        value={props.value}\r\n        onChange={props.onChange}\r\n        />\r\n      </div>\r\n  \r\n    )\r\n  }\r\n\r\n  export default Input","import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst create = newPerson => {\r\n    const request = axios.post(baseUrl, newPerson)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newPerson) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, newPerson)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst remove = (id) => {\r\n    const request = axios.delete(`${baseUrl}/${id}`)\r\n    return request.then(response => response.data)\r\n\r\n}\r\n\r\n\r\n// eslint-disable-next-line import/no-anonymous-default-export\r\nexport default {\r\n\r\n    getAll: getAll,\r\n    create: create,\r\n    update: update,\r\n    // eslint-disable-next-line no-undef\r\n    remove: remove\r\n}","import React from 'react'\r\n\r\nconst Notification = ({ message }) => {\r\n\r\n  if (message === null) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <div className='info'>\r\n      {message}\r\n    </div>\r\n  )\r\n\r\n}\r\n    \r\n    \r\n  export default Notification","import React from 'react'\r\n\r\nconst Errorinfo = ({ errorMessage }) => {\r\n\r\n    if (errorMessage === null) {\r\n        return null\r\n      }\r\n    \r\n      return (\r\n        <div className='error'>\r\n          {errorMessage}\r\n        </div>\r\n      )\r\n\r\n\r\n}\r\n\r\n\r\nexport default Errorinfo","import React, { useState, useEffect } from 'react'\nimport Person from './components/Person'\nimport Filter from './components/Filter'\nimport Input from './components/Input'\nimport personService from './services/persons'\nimport Notification from './components/Notification'\nimport Errorinfo from './components/Errorinfo'\n\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [newFilter, setNewFilter] = useState('')\n  const [showAll, setShowAll] = useState(true)\n  const [infoMessage, setInfoMessage] = useState(null)\n  const [errorMessage, setErrorMessage] = useState(null)\n\n  useEffect(() => {\n      personService\n        .getAll()\n        .then(initialPersons => {\n          setPersons(initialPersons)\n        })\n  }, [])\n\n\n  const addPerson = (event) => {\n    event.preventDefault()\n\n    //koostetaan listalla olevista nimistä erillinen lista\n    const names = persons.map(person => person.name)\n   \n    //aiemmin lisätty nimi ei saa olla nimilistalla\n    //ehto joka tarkistetaan ennen persons-listalle lisäämistä\n    if(!names.includes(newName)){\n\n      const personObject = {\n        name: newName,\n        number: newNumber,\n        \n      }  \n\n      personService\n        .create(personObject)\n        .then(returnedPerson => {\n          setPersons(persons.concat(returnedPerson))\n          setNewName('')\n          setNewNumber('')\n        })\n        setInfoMessage(\n          `Added '${newName}'`\n        )\n        setTimeout(() => {\n          setInfoMessage(null)\n        }, 5000)\n          \n    }\n\n    else {\n\n      if(window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)){\n\n        const name = newName\n        const person = persons.find(p => p.name === name)\n        const id = person.id \n        \n        //kutsu numeron päivittävälle funktiolle\n        changeNumber(id, newNumber)\n\n        setNewName('')\n        setNewNumber('')\n\n\n      }\n\n      setNewName('')\n      setNewNumber('')\n\n    }\n          \n  }\n\n  const changeNumber = (id, newNumber) => {\n    const person = persons.find(p => p.id === id)\n    const changedPerson = { ...person, number: newNumber }\n\n    personService\n      .update(id, changedPerson)\n\n      .then(returnedPerson => {\n        setPersons(persons.map(person => person.id !== id ? person : returnedPerson))\n\n        setInfoMessage(\n          `Updated '${newNumber}'`\n        )\n        setTimeout(() => {\n          setInfoMessage(null)\n        }, 5000)\n      })\n\n      .catch(error => {\n        setErrorMessage(\n         `Information of '${person.name}' has already been removed from server`\n        )\n        //ajastin asettaa 5 sek. kuluttua errormessagen arvoksi null\n        setTimeout(() => {\n          setErrorMessage(null)\n        }, 5000)\n        setPersons(persons.filter(person => person.id !== id))\n  \n      })\n\n\n  }\n\n\n  //funktio, joka poistaa henkilön palvelimelta ja näkymästä  \n  const personToErase = (id) => {\n\n    const person = persons.find(p => p.id === id)\n\n    if(window.confirm(`Delete ${person.name}?`)) {\n\n      personService\n      .remove(person.id)\n      .then(() => {\n          setPersons(persons.filter(p => p.id !== person.id))\n      })\n      setInfoMessage(\n        `Removed '${person.name}'`\n      )\n      setTimeout(() => {\n        setInfoMessage(null)\n      }, 5000)\n\n\n    }\n\n  }\n\n\n  const handleNameChange = (event) => {\n    console.log(event.target.value)\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    console.log(event.target.value)\n    setNewNumber(event.target.value)\n  }\n\n  const handleFilter = (event) => {\n    setNewFilter(event.target.value)\n    setShowAll(false)\n  }\n\n  const personsToShow = showAll\n    ? persons\n    : persons.filter(person => person.name.toLowerCase().includes(newFilter.toLowerCase()))\n   \n\n\n  return (\n    <div>\n      <h2> Phonebook </h2>\n      <Notification message={infoMessage} />\n      <Errorinfo errorMessage={errorMessage} />\n        <Filter \n          value={newFilter}\n          onChange={handleFilter}\n        />\n\n      <h2> add a new</h2>\n\n        <form onSubmit={addPerson}>\n\n          <Input \n            text='name'\n            value={newName}  \n            onChange={handleNameChange}  \n          />\n            \n          <Input \n            text='number'\n            value={newNumber}  \n            onChange={handleNumberChange}  \n          /> \n          \n          <div>\n            <button type=\"submit\">add</button>\n          </div>\n        </form>\n      <h2> Numbers</h2>\n        \n        {personsToShow.map(person => \n          <Person \n            key={person.name} \n            person={person} \n            erasePerson={() => personToErase(person.id)}\n          />\n        )}\n      \n    </div>\n  )\n}\n\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\n\nReactDOM.render(<App />, document.getElementById('root')\n);\n\n"],"sourceRoot":""}